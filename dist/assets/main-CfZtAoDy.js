import{r as o,a as fe,R as Z}from"./vendor-nf7bT_Uh.js";import{a as ge}from"./utils-NIGUFBhG.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const n of u.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();var le={exports:{}},V={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je=o,be=Symbol.for("react.element"),ye=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,Ne=je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,we={key:!0,ref:!0,__self:!0,__source:!0};function ce(s,t,a){var r,c={},u=null,n=null;a!==void 0&&(u=""+a),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(n=t.ref);for(r in t)ve.call(t,r)&&!we.hasOwnProperty(r)&&(c[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)c[r]===void 0&&(c[r]=t[r]);return{$$typeof:be,type:s,key:u,ref:n,props:c,_owner:Ne.current}}V.Fragment=ye;V.jsx=ce;V.jsxs=ce;le.exports=V;var e=le.exports,Y={},se=fe;Y.createRoot=se.createRoot,Y.hydrateRoot=se.hydrateRoot;/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oe=(...s)=>s.filter((t,a,r)=>!!t&&r.indexOf(t)===a).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=o.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:c="",children:u,iconNode:n,...g},d)=>o.createElement("svg",{ref:d,...Ce,width:t,height:t,stroke:s,strokeWidth:r?Number(a)*24/Number(t):a,className:oe("lucide",c),...g},[...n.map(([w,p])=>o.createElement(w,p)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=(s,t)=>{const a=o.forwardRef(({className:r,...c},u)=>o.createElement(Se,{ref:u,iconNode:t,className:oe(`lucide-${ke(s)}`,r),...c}));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=j("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=j("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=j("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=j("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=j("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=j("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=j("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=j("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=j("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=j("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=j("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=j("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=j("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=j("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=j("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=j("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=j("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=j("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=j("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=j("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=j("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=j("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=j("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=j("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=j("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=j("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=j("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=j("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=j("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=j("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=j("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=j("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=j("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=j("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function he(s,t){const[a,r]=o.useState(()=>{try{if(typeof window>"u")return t;const n=window.localStorage.getItem(s);return n?JSON.parse(n):t}catch(n){return console.warn(`Error reading localStorage key "${s}":`,n),t}}),c=o.useCallback(n=>{try{const g=n instanceof Function?n(a):n;r(g),typeof window<"u"&&window.localStorage.setItem(s,JSON.stringify(g))}catch(g){console.warn(`Error setting localStorage key "${s}":`,g)}},[s,a]),u=o.useCallback(()=>{try{r(t),typeof window<"u"&&window.localStorage.removeItem(s)}catch(n){console.warn(`Error removing localStorage key "${s}":`,n)}},[s,t]);return o.useEffect(()=>{const n=g=>{if(g.key===s&&g.newValue!==null)try{r(JSON.parse(g.newValue))}catch(d){console.warn(`Error parsing localStorage change for key "${s}":`,d)}};if(typeof window<"u")return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[s]),[a,c,u]}const pe=o.createContext(),U={favoriteStores:[],blockedStores:[],hiddenCategories:[],maxDistance:10,minDiscount:0,sortBy:"distance",showExpiredDeals:!1,preferredView:"grid"};function Ve({children:s}){const[t,a]=he("userFilters",U),r=o.useCallback((x,i)=>{a(l=>({...l,[x]:i}))},[a]),c=o.useCallback(x=>{a(i=>({...i,...x}))},[a]),u=o.useCallback(()=>{a(U)},[a]),n=o.useCallback(x=>{a(i=>{const l=i.favoriteStores||[],m=l.includes(x);return{...i,favoriteStores:m?l.filter(v=>v!==x):[...l,x],blockedStores:m?i.blockedStores:(i.blockedStores||[]).filter(v=>v!==x)}})},[a]),g=o.useCallback(x=>{a(i=>{const l=i.blockedStores||[],m=l.includes(x);return{...i,blockedStores:m?l.filter(v=>v!==x):[...l,x],favoriteStores:m?i.favoriteStores:(i.favoriteStores||[]).filter(v=>v!==x)}})},[a]),d=o.useCallback(x=>{a(i=>{const l=i.hiddenCategories||[],m=l.includes(x);return{...i,hiddenCategories:m?l.filter(v=>v!==x):[...l,x]}})},[a]),w=o.useMemo(()=>{const x=t.favoriteStores||[],i=t.blockedStores||[],l=t.hiddenCategories||[];return{hasFavoriteStores:x.length>0,hasBlockedStores:i.length>0,hasHiddenCategories:l.length>0,hasActiveFilters:x.length>0||i.length>0||l.length>0||t.maxDistance!==U.maxDistance||t.minDiscount!==U.minDiscount,isFavoriteStore:m=>x.includes(m),isBlockedStore:m=>i.includes(m),isCategoryHidden:m=>l.includes(m),shouldShowStore:m=>!(!m||i.includes(m.id)),shouldShowDeal:m=>!(!m||m.store_id&&i.includes(m.store_id)||m.category&&l.includes(m.category)||t.minDiscount>0&&(m.discount_percent||0)<t.minDiscount||!t.showExpiredDeals&&m.sale_end&&new Date(m.sale_end)<new Date)}},[t]),p=o.useCallback((x,i="deals")=>{if(!Array.isArray(x))return x;const{favoriteStores:l}=t;return[...x].sort((m,v)=>{if(i==="stores"){const h=l.includes(m.id),k=l.includes(v.id);if(h&&!k)return-1;if(!h&&k)return 1}switch(t.sortBy){case"distance":if(m.distance!==void 0&&v.distance!==void 0)return(m.distance||999)-(v.distance||999);break;case"price":if(m.price!==void 0&&v.price!==void 0)return m.price-v.price;break;case"discount":{const h=m.discount_percent||0;return(v.discount_percent||0)-h}case"name":{const h=m.name||"",k=v.name||"";return h.localeCompare(k)}}return 0})},[t]),N=o.useMemo(()=>({filters:t,updateFilter:r,updateFilters:c,resetFilters:u,toggleFavoriteStore:n,toggleBlockedStore:g,toggleHiddenCategory:d,sortData:p,...w}),[t,r,c,u,n,g,d,p,w]);return e.jsx(pe.Provider,{value:N,children:s})}function Q(){const s=o.useContext(pe);if(!s)throw new Error("useFilters must be used within a FilterProvider");return s}function Ge(s={}){const t={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5,...s},[a,r,c]=he("userLocation",null),[u,n]=o.useState(a),[g,d]=o.useState(!1),[w,p]=o.useState(null),[N,x]=o.useState((a==null?void 0:a.timestamp)||null),i=typeof navigator<"u"&&"geolocation"in navigator,l=o.useCallback(()=>{if(!i){p({code:"UNSUPPORTED",message:"Geolocation is not supported by this browser"});return}d(!0),p(null),navigator.geolocation.getCurrentPosition(y=>{const f={lat:y.coords.latitude,lng:y.coords.longitude,accuracy:y.coords.accuracy,timestamp:Date.now()};n(f),r(f),x(f.timestamp),d(!1),p(null)},y=>{let f="Failed to get location";switch(y.code){case y.PERMISSION_DENIED:f="Location access denied by user";break;case y.POSITION_UNAVAILABLE:f="Location information is unavailable";break;case y.TIMEOUT:f="Location request timed out";break;default:f="An unknown error occurred";break}p({code:y.code,message:f,originalError:y}),d(!1)},t)},[i,t,r]),m=o.useCallback(()=>{n(null),c(),x(null),p(null)},[c]),v=o.useCallback(()=>{if(!N)return!0;const y=5*60*1e3;return Date.now()-N>y},[N]),h=o.useCallback(()=>i?new Promise((y,f)=>{d(!0),p(null),navigator.geolocation.getCurrentPosition(b=>{const C={lat:b.coords.latitude,lng:b.coords.longitude,accuracy:b.coords.accuracy,timestamp:Date.now()};n(C),r(C),x(C.timestamp),d(!1),y(C)},b=>{let C="Failed to get location";switch(b.code){case b.PERMISSION_DENIED:C="Location access denied. Please enable location access in your browser settings.";break;case b.POSITION_UNAVAILABLE:C="Location information is unavailable. Please try again.";break;case b.TIMEOUT:C="Location request timed out. Please try again.";break;default:C="An unknown error occurred while getting your location.";break}const F={code:b.code,message:C,originalError:b};p(F),d(!1),f(F)},t)}):(p({code:"UNSUPPORTED",message:"Geolocation is not supported by this browser"}),Promise.reject(new Error("Geolocation not supported"))),[i,t,r]),k=o.useCallback(()=>{if(!i)return null;const y=navigator.geolocation.watchPosition(f=>{const b={lat:f.coords.latitude,lng:f.coords.longitude,accuracy:f.coords.accuracy,timestamp:Date.now()};n(b),r(b),x(b.timestamp)},f=>{console.warn("Watch position error:",f)},{...t,maximumAge:6e4});return()=>navigator.geolocation.clearWatch(y)},[i,t,r]);o.useEffect(()=>{a&&!u&&(n(a),x(a.timestamp))},[a,u]);const _=o.useCallback((y,f,b,C)=>{const $=(b-y)*Math.PI/180,O=(C-f)*Math.PI/180,I=Math.sin($/2)*Math.sin($/2)+Math.cos(y*Math.PI/180)*Math.cos(b*Math.PI/180)*Math.sin(O/2)*Math.sin(O/2);return 6371*(2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I)))},[]);return{location:u,loading:g,error:w,isSupported:i,lastUpdated:N,getCurrentPosition:l,requestLocation:h,clearLocation:m,needsRefresh:v,watchPosition:k,calculateDistance:_,hasLocation:!!u,isStale:v()}}function We({onLocationDetected:s,className:t=""}){var _,y;const{location:a,loading:r,error:c,isSupported:u,requestLocation:n,needsRefresh:g,hasLocation:d,isStale:w}=Ge(),[p,N]=o.useState(!1),[x,i]=o.useState(""),[l,m]=o.useState("");o.useEffect(()=>{a&&s&&s(a)},[a,s]);const v=f=>/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/i.test(f.replace(/\s/g,"")),h=f=>{f.preventDefault();const b=x.replace(/\s/g,"").toUpperCase();if(!v(b)){m("Please enter a valid Canadian postal code (e.g., K1A 0A6)");return}m("");const C={postalCode:b,timestamp:Date.now(),source:"postal_code"};s==null||s(C),N(!1)},k=async()=>{try{await n()}catch(f){console.error("Location request failed:",f)}};return u?p?e.jsxs("div",{className:`bg-white border border-neutral-200 rounded-xl p-6 shadow-soft ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-neutral-900",children:"Enter Your Location"}),e.jsx("button",{onClick:()=>{N(!1),m(""),i("")},className:"text-neutral-500 hover:text-neutral-700",children:"Cancel"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Canadian Postal Code"}),e.jsx("input",{id:"postalCode",type:"text",value:x,onChange:f=>{i(f.target.value),m("")},placeholder:"K1A 0A6",className:`
                w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent
                ${l?"border-red-300":"border-neutral-300"}
              `}),l&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors font-medium",children:"Use This Location"}),u&&e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 transition-colors",children:"Use GPS Instead"})]})]})]}):d&&!w?e.jsx("div",{className:`bg-green-50 border border-green-200 rounded-xl p-4 ${t}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(E,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Location detected"}),e.jsx("p",{className:"text-xs text-green-600",children:a.postalCode?`${a.postalCode}`:`${(_=a.lat)==null?void 0:_.toFixed(4)}, ${(y=a.lng)==null?void 0:y.toFixed(4)}`})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(!0),className:"text-xs text-green-700 hover:text-green-800 px-2 py-1 rounded hover:bg-green-100 transition-colors",children:"Change"}),g()&&e.jsxs("button",{onClick:k,disabled:r,className:"flex items-center space-x-1 text-xs text-green-700 hover:text-green-800 px-2 py-1 rounded hover:bg-green-100 transition-colors",children:[e.jsx(qe,{className:`h-3 w-3 ${r?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})}):c?e.jsx("div",{className:`bg-red-50 border border-red-200 rounded-xl p-6 ${t}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(re,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Location Access Required"}),e.jsx("p",{className:"text-sm text-red-700 mb-3",children:c.message}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:k,disabled:r,className:"flex items-center space-x-2 text-sm bg-red-600 text-white px-3 py-1.5 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[r?e.jsx(T,{className:"h-4 w-4 animate-spin"}):e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsx("button",{onClick:()=>N(!0),className:"text-sm border border-red-300 text-red-700 px-3 py-1.5 rounded-lg hover:bg-red-100 transition-colors",children:"Enter Postal Code"})]})]})]})}):e.jsx("div",{className:`bg-white border-2 border-dashed border-neutral-300 rounded-xl p-8 text-center ${t}`,children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-primary-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(E,{className:"h-8 w-8 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Find Deals Near You"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Allow location access to discover grocery stores and deals in your area, or enter your postal code manually."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{onClick:k,disabled:r,className:"flex items-center justify-center space-x-2 bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 font-medium",children:[r?e.jsx(T,{className:"h-5 w-5 animate-spin"}):e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{children:r?"Getting Location...":"Use My Location"})]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center justify-center space-x-2 border border-neutral-300 text-neutral-700 px-6 py-3 rounded-lg hover:bg-neutral-50 transition-colors",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Enter Postal Code"})]})]}),e.jsx("p",{className:"text-xs text-neutral-500 mt-4",children:"Your location is only used to find nearby stores and is stored locally on your device."})]})}):e.jsx("div",{className:`bg-yellow-50 border border-yellow-200 rounded-xl p-6 ${t}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(re,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Location Not Supported"}),e.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Your browser doesn't support location services. You can still use FlyerFlutter by entering your postal code."}),e.jsx("button",{onClick:()=>N(!0),className:"text-sm bg-yellow-600 text-white px-3 py-1.5 rounded-lg hover:bg-yellow-700 transition-colors",children:"Enter Postal Code"})]})]})})}function Ye({store:s,className:t="",showDeals:a=!0,compact:r=!1}){const{isFavoriteStore:c,isBlockedStore:u,toggleFavoriteStore:n,toggleBlockedStore:g}=Q();if(!s)return null;const d=c(s.id),w=u(s.id),p=()=>{if(s.lat&&s.lng){const l=`https://www.google.com/maps/dir/?api=1&destination=${s.lat},${s.lng}`;window.open(l,"_blank")}else if(s.address){const m=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s.address)}`;window.open(m,"_blank")}},N=l=>{l.stopPropagation(),n(s.id)},x=l=>{l.stopPropagation(),g(s.id)},i=l=>l==null?"":l<1?`${Math.round(l*1e3)}m`:`${l.toFixed(1)}km`;return r?e.jsx("div",{className:`bg-white border border-neutral-200 rounded-lg p-3 hover:shadow-medium transition-shadow ${t}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:s.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-neutral-600",children:s.rating.toFixed(1)})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-neutral-900 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-neutral-500",children:[s.distance!==void 0&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(E,{className:"h-3 w-3"}),e.jsx("span",{children:i(s.distance)})]}),s.active_deals_count>0&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.active_deals_count," deals"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx("button",{onClick:N,className:`p-1.5 rounded-lg transition-colors ${d?"text-red-500 bg-red-50 hover:bg-red-100":"text-neutral-400 hover:text-red-500 hover:bg-red-50"}`,title:d?"Remove from favorites":"Add to favorites",children:e.jsx(B,{className:`h-4 w-4 ${d?"fill-current":""}`})}),e.jsx("button",{onClick:p,className:"p-1.5 rounded-lg text-neutral-400 hover:text-primary-600 hover:bg-primary-50 transition-colors",title:"Get directions",children:e.jsx(H,{className:"h-4 w-4"})})]})]})}):e.jsxs("div",{className:`bg-white border border-neutral-200 rounded-xl shadow-soft hover:shadow-medium transition-all duration-200 overflow-hidden ${w?"opacity-60":""} ${t}`,children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 truncate",children:s.name}),d&&e.jsx("div",{className:"bg-red-100 text-red-600 px-2 py-0.5 rounded text-xs font-medium",children:"Favorite"})]}),e.jsx("p",{className:"text-sm text-neutral-600 line-clamp-2",children:s.address})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:N,className:`p-2 rounded-lg transition-colors ${d?"text-red-500 bg-red-50 hover:bg-red-100":"text-neutral-400 hover:text-red-500 hover:bg-red-50"}`,title:d?"Remove from favorites":"Add to favorites",children:e.jsx(B,{className:`h-5 w-5 ${d?"fill-current":""}`})}),e.jsx("button",{onClick:x,className:`p-2 rounded-lg transition-colors ${w?"text-neutral-600 bg-neutral-100 hover:bg-neutral-200":"text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100"}`,title:w?"Unblock store":"Block store",children:e.jsx(G,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-neutral-600",children:s.rating.toFixed(1)})]}),s.distance!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1 text-neutral-500",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:i(s.distance)})]}),s.active_deals_count>0&&e.jsxs("div",{className:"flex items-center space-x-1 text-primary-600",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:[s.active_deals_count," active deals"]})]})]}),s.updated_at&&e.jsxs("div",{className:"flex items-center space-x-1 text-neutral-400",children:[e.jsx(de,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:["Updated ",new Date(s.updated_at).toLocaleDateString()]})]})]})]}),(s.phone||s.website)&&e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.phone&&e.jsxs("a",{href:`tel:${s.phone}`,className:"flex items-center space-x-1 text-neutral-600 hover:text-primary-600 transition-colors",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]}),s.website&&e.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-neutral-600 hover:text-primary-600 transition-colors",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Website"})]})]})}),e.jsx("div",{className:"px-6 py-4 bg-neutral-50 border-t border-neutral-100",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:p,className:"flex-1 bg-primary-600 text-white px-4 py-2.5 rounded-lg hover:bg-primary-700 transition-colors font-medium text-sm flex items-center justify-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Get Directions"})]}),a&&s.active_deals_count>0&&e.jsxs("button",{className:"px-4 py-2.5 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-white transition-colors font-medium text-sm",children:["View Deals (",s.active_deals_count,")"]})]})})]})}function Je({deal:s,compact:t=!1,showStore:a=!0,onCompare:r=null,className:c=""}){var i;const[u,n]=o.useState(!1),g=s.original_price?(s.original_price-s.price).toFixed(2):null,d=s.discount_percent||(s.original_price?Math.round((s.original_price-s.price)/s.original_price*100):null),w=l=>new Date(l).toLocaleDateString("en-CA",{month:"short",day:"numeric"}),p=l=>{l.stopPropagation(),n(!u)},N=l=>{l.stopPropagation(),navigator.share&&navigator.share({title:s.name,text:`Great deal on ${s.name} - $${s.price} at ${s.store_name}`,url:window.location.href})},x=l=>{l.stopPropagation(),r&&r(s)};return t?e.jsx("div",{className:`bg-white rounded-lg border border-neutral-200 p-3 hover:shadow-md transition-shadow cursor-pointer ${c}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[s.image_url&&e.jsx("img",{src:s.image_url,alt:s.name,className:"w-12 h-12 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-neutral-900 text-sm line-clamp-2",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:"font-bold text-green-600 text-lg",children:["$",s.price]}),s.original_price&&e.jsxs("span",{className:"text-xs text-neutral-500 line-through",children:["$",s.original_price]}),d&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:["-",d,"%"]})]}),a&&e.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:s.store_name})]})]})}):e.jsxs("div",{className:`bg-white rounded-xl shadow-soft border border-neutral-200 overflow-hidden hover:shadow-md transition-all duration-200 group ${c}`,children:[e.jsxs("div",{className:"relative",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-neutral-100 to-neutral-200 flex items-center justify-center",children:e.jsx(Be,{className:"h-12 w-12 text-neutral-400"})}),d&&e.jsxs("div",{className:"absolute top-3 left-3 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",children:["-",d,"% OFF"]}),e.jsxs("div",{className:"absolute top-3 right-3 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:p,className:`p-2 rounded-full backdrop-blur-sm ${u?"bg-red-500 text-white":"bg-white/80 text-neutral-700 hover:bg-white"} shadow-lg transition-colors`,children:e.jsx(B,{className:`h-4 w-4 ${u?"fill-current":""}`})}),e.jsx("button",{onClick:N,className:"p-2 rounded-full bg-white/80 backdrop-blur-sm text-neutral-700 hover:bg-white shadow-lg transition-colors",children:e.jsx(Ue,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute bottom-3 left-3 bg-black/70 text-white px-2 py-1 rounded text-xs backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsxs("span",{children:[w(s.sale_start)," - ",w(s.sale_end)]})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 line-clamp-2 mb-1",children:s.name}),s.category&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-3 w-3 text-neutral-500"}),e.jsx("span",{className:"text-xs text-neutral-600 uppercase tracking-wide",children:s.category})]})]}),s.description&&e.jsx("p",{className:"text-sm text-neutral-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-baseline space-x-2 mb-1",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["$",s.price]}),s.original_price&&e.jsxs("span",{className:"text-lg text-neutral-500 line-through",children:["$",s.original_price]})]}),g&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-700",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Save $",g]})]})]}),a&&e.jsx("div",{className:"mb-4 p-3 bg-neutral-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:((i=s.store_name)==null?void 0:i.charAt(0))||"S"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-900 text-sm",children:s.store_name}),s.store_distance&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-neutral-600",children:[e.jsx(E,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.store_distance,"km away"]})]})]})]}),s.flyer_url&&e.jsxs("a",{href:s.flyer_url,target:"_blank",rel:"noopener noreferrer",onClick:l=>l.stopPropagation(),className:"text-primary-600 hover:text-primary-700 text-xs font-medium flex items-center space-x-1",children:[e.jsx("span",{children:"View Flyer"}),e.jsx(Pe,{className:"h-3 w-3"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[r&&e.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary-50 text-primary-700 rounded-lg hover:bg-primary-100 transition-colors font-medium text-sm",children:"Compare Prices"}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-neutral-500",children:[e.jsx(de,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.updated_at)>new Date(Date.now()-24*60*60*1e3)?"Updated today":`Updated ${w(s.updated_at)}`})]})]}),s.rank_score&&e.jsx("div",{className:"mt-3 pt-3 border-t border-neutral-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-neutral-600",children:"Deal Score"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"flex space-x-0.5",children:[...Array(5)].map((l,m)=>e.jsx(J,{className:`h-3 w-3 ${m<Math.round(s.rank_score/20)?"text-yellow-400 fill-current":"text-neutral-300"}`},m))}),e.jsxs("span",{className:"text-xs text-neutral-600 ml-1",children:[Math.round(s.rank_score),"/100"]})]})]})})]})]})}const L=ge.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});L.interceptors.request.use(s=>s,s=>(console.error("Request error:",s),Promise.reject(s)));L.interceptors.response.use(s=>s,s=>{if(s.response){const{status:t,data:a}=s.response;switch(console.error(`❌ API Error ${t}:`,a),t){case 401:break;case 403:break;case 404:break;case 429:console.warn("⚠️ Rate limited - please slow down requests");break;case 500:console.error("🚨 Server error - please try again later");break}}else s.request?console.error("📶 Network error - please check your connection"):console.error("❌ Request setup error:",s.message);return Promise.reject(s)});const K={async getHealth(){return(await L.get("/health")).data},async getApiStatus(){return(await L.get("/status")).data},async getNearbyStores({lat:s,lng:t,radius:a=5e3,maxResults:r=20,page:c=1,perPage:u=20}){return(await L.get("/stores",{params:{lat:s,lng:t,radius:a,max_results:r,page:c,per_page:u}})).data},async getStore(s){return(await L.get(`/stores/${s}`)).data},async getDeals(s={}){const{lat:t,lng:a,postalCode:r,query:c,storeId:u,category:n,minDiscount:g,page:d=1,perPage:w=50,refresh:p=!1}=s;return(await L.get("/deals",{params:{lat:t,lng:a,postal_code:r,query:c,store_id:u,category:n,min_discount:g,page:d,per_page:w,refresh:p}})).data},async compareDeals(s,t=null){return(await L.get("/deals/compare",{params:{product:s,postal_code:t}})).data},async testFlippApi(s="K1A0A6",t="milk"){return(await L.post("/test-flipp",null,{params:{postal_code:s,query:t}})).data},async refreshDeals(s){return(await L.post("/refresh-deals",null,{params:{postal_code:s}})).data}};function Ke({product:s,isOpen:t,onClose:a,userLocation:r}){var w,p,N,x;const[c,u]=o.useState(null),[n,g]=o.useState(!1),d=async()=>{if(!(!s||!t)){g(!0);try{const i=await K.compareDeals(s.name,r==null?void 0:r.postalCode);u(i)}catch(i){console.error("Failed to load comparison:",i)}finally{g(!1)}}};return Z.useEffect(()=>{t&&s&&d()},[t,s]),t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-neutral-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-neutral-900",children:["Price Comparison: ",s==null?void 0:s.name]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",children:"✕"})]})}),e.jsx("div",{className:"p-6 overflow-y-auto",children:n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{children:"Comparing prices across stores..."})]}):c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(_e,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Best Deal"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-neutral-900",children:(w=c.best_deal)==null?void 0:w.store_name}),e.jsx("p",{className:"text-sm text-neutral-600",children:(p=c.best_deal)==null?void 0:p.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",(N=c.best_deal)==null?void 0:N.price]}),c.max_savings>0&&e.jsxs("p",{className:"text-sm text-green-700",children:["Save up to $",c.max_savings.toFixed(2)]})]})]})]}),((x=c.other_deals)==null?void 0:x.length)>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-neutral-900",children:"Other Options"}),c.other_deals.map((i,l)=>e.jsx("div",{className:"bg-neutral-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-900",children:i.store_name}),e.jsx("p",{className:"text-sm text-neutral-600",children:i.name})]}),e.jsxs("p",{className:"text-lg font-semibold text-neutral-900",children:["$",i.price]})]})},l))]}),e.jsx("div",{className:"bg-neutral-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-neutral-600",children:["Compared across ",c.total_stores," stores in your area"]})})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-neutral-600",children:"No comparison data available for this product."})})})]})}):null}function Ze({deals:s=[],loading:t=!1,error:a=null,className:r="",showFilters:c=!0,showSearch:u=!0,userLocation:n=null}){const{shouldShowDeal:g}=Q(),[d,w]=o.useState(""),[p,N]=o.useState(""),[x,i]=o.useState("discount"),[l,m]=o.useState("desc"),[v,h]=o.useState("grid"),[k,_]=o.useState(!1),[y,f]=o.useState(null),[b,C]=o.useState(!1),F=o.useMemo(()=>{let S=s.filter(M=>{var A,D,P;if(!g(M))return!1;if(d){const W=d.toLowerCase();if(!(((A=M.name)==null?void 0:A.toLowerCase().includes(W))||((D=M.description)==null?void 0:D.toLowerCase().includes(W))||((P=M.store_name)==null?void 0:P.toLowerCase().includes(W))))return!1}return!(p&&M.category!==p)});return S.sort((M,A)=>{let D,P;switch(x){case"price":D=M.price||0,P=A.price||0;break;case"discount":D=M.discount_percent||0,P=A.discount_percent||0;break;case"name":return D=M.name||"",P=A.name||"",l==="asc"?D.localeCompare(P):P.localeCompare(D);case"store":return D=M.store_name||"",P=A.store_name||"",l==="asc"?D.localeCompare(P):P.localeCompare(D);case"expiry":D=new Date(M.sale_end||"9999-12-31"),P=new Date(A.sale_end||"9999-12-31");break;default:return 0}return l==="asc"?D-P:P-D}),S},[s,d,p,x,l,g]),$=o.useMemo(()=>[...new Set(s.map(M=>M.category).filter(Boolean))].sort(),[s]),O=S=>{x===S?m(l==="asc"?"desc":"asc"):(i(S),m(S==="price"?"asc":"desc"))},I=S=>{f(S),C(!0)},ee=()=>{C(!1),f(null)};return a?e.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-xl p-6 text-center ${r}`,children:[e.jsx("div",{className:"text-red-600 mb-2",children:e.jsx(ne,{className:"h-8 w-8 mx-auto mb-2"})}),e.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load deals"}),e.jsx("p",{className:"text-red-600",children:a})]}):e.jsxs("div",{className:r,children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-neutral-900",children:[d||p?"Filtered ":"","Deals",!t&&e.jsxs("span",{className:"text-lg font-normal text-neutral-500 ml-2",children:["(",F.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"bg-neutral-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>h("grid"),className:`p-2 rounded ${v==="grid"?"bg-white shadow-sm":"text-neutral-500"}`,children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h("list"),className:`p-2 rounded ${v==="list"?"bg-white shadow-sm":"text-neutral-500"}`,children:e.jsx(Ee,{className:"h-4 w-4"})})]}),c&&e.jsxs("button",{onClick:()=>_(!k),className:"flex items-center space-x-2 px-3 py-2 border border-neutral-300 rounded-lg hover:bg-neutral-50",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Filter"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u&&e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{className:"h-5 w-5 text-neutral-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search deals, products, or stores...",value:d,onChange:S=>w(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:p,onChange:S=>N(S.target.value),className:"px-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),$.map(S=>e.jsx("option",{value:S,children:S.charAt(0).toUpperCase()+S.slice(1)},S))]}),e.jsxs("button",{onClick:()=>O("discount"),className:`flex items-center space-x-1 px-3 py-2 rounded-lg border ${x==="discount"?"bg-primary-50 border-primary-200 text-primary-700":"border-neutral-300 hover:bg-neutral-50"}`,children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"Discount"}),x==="discount"&&(l==="desc"?e.jsx(te,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"}))]}),e.jsxs("button",{onClick:()=>O("price"),className:`flex items-center space-x-1 px-3 py-2 rounded-lg border ${x==="price"?"bg-primary-50 border-primary-200 text-primary-700":"border-neutral-300 hover:bg-neutral-50"}`,children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Price"}),x==="price"&&(l==="desc"?e.jsx(te,{className:"h-4 w-4"}):e.jsx(ae,{className:"h-4 w-4"}))]})]})]})]}),t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-600",children:"Loading deals..."})]}),!t&&F.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No deals found"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:d||p?"Try adjusting your search or filters to find more deals.":"No deals are currently available for your location."}),(d||p)&&e.jsx("button",{onClick:()=>{w(""),N("")},className:"text-primary-600 hover:text-primary-700 font-medium",children:"Clear filters"})]}),!t&&F.length>0&&e.jsx("div",{className:v==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:F.map((S,M)=>e.jsx(Je,{deal:S,compact:v==="list",onCompare:I,showStore:!0},S.id||M))}),e.jsx(Ke,{product:y,isOpen:b,onClose:ee,userLocation:n})]})}function Xe({isOpen:s,onClose:t,className:a=""}){var v;const{filters:r,updateFilters:c,resetFilters:u}=Q(),[n,g]=o.useState(r),[d,w]=o.useState({price:!0,location:!0,discount:!0,stores:!1,categories:!1,time:!1});o.useEffect(()=>{s&&g(r)},[s,r]);const p=(h,k)=>{g(_=>({..._,[h]:k}))},N=()=>{c(n),t()},x=()=>{g({minPrice:0,maxPrice:100,maxDistance:10,minDiscount:0,categories:[],blockedStores:[],favoriteStores:[],showExpired:!1,sortBy:"discount",sortOrder:"desc"}),u()},i=h=>{w(k=>({...k,[h]:!k[h]}))},l=["Produce","Meat & Seafood","Dairy & Eggs","Bakery","Frozen","Pantry","Beverages","Health & Beauty","Household","Baby","Pet","Other"],m=["Walmart","Metro","Sobeys","Loblaws","No Frills","FreshCo","Food Basics","IGA","Safeway","Save-On-Foods"];return s?e.jsxs("div",{className:`fixed inset-0 z-50 ${a}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"h-5 w-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Filter Deals"})]}),e.jsx("button",{onClick:t,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(G,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("price"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"Price Range"})]}),d.price?e.jsx(q,{className:"h-4 w-4 text-neutral-400"}):e.jsx(R,{className:"h-4 w-4 text-neutral-400"})]}),d.price&&e.jsxs("div",{className:"space-y-4 pl-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Min Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-500 text-sm",children:"$"}),e.jsx("input",{type:"number",min:"0",step:"0.50",value:n.minPrice,onChange:h=>p("minPrice",parseFloat(h.target.value)||0),className:"w-full pl-8 pr-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Max Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-500 text-sm",children:"$"}),e.jsx("input",{type:"number",min:"0",step:"0.50",value:n.maxPrice,onChange:h=>p("maxPrice",parseFloat(h.target.value)||100),className:"w-full pl-8 pr-3 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"px-2",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:n.maxPrice,onChange:h=>p("maxPrice",parseFloat(h.target.value)),className:"w-full h-2 bg-neutral-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[e.jsx("span",{children:"$0"}),e.jsx("span",{children:"$100+"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("location"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"Distance"})]}),d.location?e.jsx(q,{className:"h-4 w-4 text-neutral-400"}):e.jsx(R,{className:"h-4 w-4 text-neutral-400"})]}),d.location&&e.jsx("div",{className:"space-y-3 pl-6",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Maximum Distance: ",n.maxDistance,"km"]}),e.jsx("input",{type:"range",min:"1",max:"50",value:n.maxDistance,onChange:h=>p("maxDistance",parseInt(h.target.value)),className:"w-full h-2 bg-neutral-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[e.jsx("span",{children:"1km"}),e.jsx("span",{children:"50km"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("discount"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"Minimum Discount"})]}),d.discount?e.jsx(q,{className:"h-4 w-4 text-neutral-400"}):e.jsx(R,{className:"h-4 w-4 text-neutral-400"})]}),d.discount&&e.jsx("div",{className:"space-y-3 pl-6",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Minimum Discount: ",n.minDiscount,"%"]}),e.jsx("input",{type:"range",min:"0",max:"75",step:"5",value:n.minDiscount,onChange:h=>p("minDiscount",parseInt(h.target.value)),className:"w-full h-2 bg-neutral-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"75%"})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("categories"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"Categories"}),((v=n.categories)==null?void 0:v.length)>0&&e.jsx("span",{className:"bg-primary-100 text-primary-600 px-2 py-0.5 rounded-full text-xs font-medium",children:n.categories.length})]}),d.categories?e.jsx(q,{className:"h-4 w-4 text-neutral-400"}):e.jsx(R,{className:"h-4 w-4 text-neutral-400"})]}),d.categories&&e.jsx("div",{className:"space-y-2 pl-6 max-h-48 overflow-y-auto",children:l.map(h=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((k=n.categories)==null?void 0:k.includes(h))||!1,onChange:_=>{const y=n.categories||[];_.target.checked?p("categories",[...y,h]):p("categories",y.filter(f=>f!==h))},className:"w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:h})]},h)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("stores"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ue,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"Store Preferences"})]}),d.stores?e.jsx(q,{className:"h-4 w-4 text-neutral-400"}):e.jsx(R,{className:"h-4 w-4 text-neutral-400"})]}),d.stores&&e.jsxs("div",{className:"space-y-4 pl-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Favorite Stores"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:m.map(h=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((k=n.favoriteStores)==null?void 0:k.includes(h))||!1,onChange:_=>{const y=n.favoriteStores||[];_.target.checked?p("favoriteStores",[...y,h]):p("favoriteStores",y.filter(f=>f!==h))},className:"w-4 h-4 text-green-600 border-neutral-300 rounded focus:ring-green-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:h})]},h)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Hide Stores"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:m.map(h=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:((k=n.blockedStores)==null?void 0:k.includes(h))||!1,onChange:_=>{const y=n.blockedStores||[];_.target.checked?p("blockedStores",[...y,h]):p("blockedStores",y.filter(f=>f!==h))},className:"w-4 h-4 text-red-600 border-neutral-300 rounded focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:h})]},h)})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>i("time"),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"font-medium text-neutral-900",children:"Time Preferences"})]}),d.time?e.jsx(q,{className:"h-4 w-4 text-neutral-400"}):e.jsx(R,{className:"h-4 w-4 text-neutral-400"})]}),d.time&&e.jsx("div",{className:"space-y-3 pl-6",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.showExpired||!1,onChange:h=>p("showExpired",h.target.checked),className:"w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-neutral-700",children:"Show expired deals"})]})})]})]}),e.jsx("div",{className:"p-6 border-t border-neutral-200 bg-neutral-50",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:x,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-100 transition-colors",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]}),e.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"Apply Filters"})]})]})})]})}),e.jsx("style",{children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #22c55e;
          cursor: pointer;
          border: 2px solid #fff;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .slider::-moz-range-thumb {
          height: 20px;
          width: 20px;
          border-radius: 50%;
          background: #22c55e;
          cursor: pointer;
          border: 2px solid #fff;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
      `})]}):null}function Qe({userLocation:s,onLocationChange:t,onFilterToggle:a,showMobileNav:r,onMobileNavToggle:c}){return e.jsx("header",{className:"bg-white shadow-sm border-b border-neutral-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:c,className:"md:hidden p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg",children:r?e.jsx(G,{className:"h-5 w-5"}):e.jsx($e,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-red-500 to-orange-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"🛒"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("h1",{className:"text-xl font-bold text-neutral-900",children:"FlyerFlutter"}),e.jsx("p",{className:"text-xs text-neutral-500 -mt-1",children:"Canadian Coupon Finder"})]})]})]}),e.jsx("div",{className:"flex-1 max-w-md mx-4",children:e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-neutral-50 rounded-lg",children:[e.jsx(E,{className:"h-4 w-4 text-neutral-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-neutral-700 truncate",children:s?`${s.city||s.postalCode||"Unknown Location"}`:"Location not set"}),e.jsx("button",{onClick:t,className:"text-xs text-primary-600 hover:text-primary-700 font-medium ml-2 flex-shrink-0",children:"Change"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:a,className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg",children:e.jsx(X,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg hidden sm:block",children:e.jsx(Me,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-lg hidden sm:block",children:e.jsx(ze,{className:"h-5 w-5"})})]})]})})})}function es({showMobileNav:s,onClose:t}){const a=[{icon:Ae,label:"Deals",active:!0},{icon:ue,label:"Stores",active:!1},{icon:B,label:"Favorites",active:!1},{icon:Ie,label:"Settings",active:!1}];return e.jsx(e.Fragment,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-30 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),e.jsx("nav",{className:"absolute left-0 top-0 h-full w-64 bg-white shadow-xl",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"FF"})}),e.jsx("span",{className:"text-lg font-semibold text-neutral-900",children:"FlyerFlutter"})]}),e.jsx("ul",{className:"space-y-2",children:a.map(r=>e.jsx("li",{children:e.jsxs("button",{className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ${r.active?"bg-primary-50 text-primary-700 font-medium":"text-neutral-700 hover:bg-neutral-100"}`,children:[e.jsx(r.icon,{className:"h-5 w-5"}),e.jsx("span",{children:r.label})]})},r.label))})]})})]})})}function ss(){const[s,t]=o.useState(null),[a,r]=o.useState(!1),[c,u]=o.useState(!1),[n,g]=o.useState(!1),[d,w]=o.useState([]),[p,N]=o.useState([]),[x,i]=o.useState(!1),[l,m]=o.useState(null);o.useEffect(()=>{const b=localStorage.getItem("userLocation");if(b)try{const C=JSON.parse(b);t(C)}catch(C){console.error("Failed to parse saved location:",C)}else r(!0)},[]),o.useEffect(()=>{s&&(s.lat&&s.lng||s.postalCode)&&v()},[s]);const v=async()=>{var b,C;if(!(!s||!(s.lat&&s.lng||s.postalCode))){i(!0),m(null);try{if(s.lat&&s.lng){const $=await K.getNearbyStores({lat:s.lat,lng:s.lng,radius:1e4,maxResults:20});w($.stores||[])}else w([]);const F=await K.getDeals({lat:s.lat,lng:s.lng,postalCode:s.postalCode,page:1,perPage:50,refresh:!1});N(F.items||[])}catch(F){console.error("Failed to load data:",F),m(((C=(b=F.response)==null?void 0:b.data)==null?void 0:C.detail)||"Failed to load deals and stores"),w([]),N([])}finally{i(!1)}}},h=b=>{t(b),r(!1),localStorage.setItem("userLocation",JSON.stringify(b))},k=()=>{r(!0)},_=()=>{u(!c)},y=()=>{g(!n)},f=()=>{g(!1)};return e.jsx(Ve,{children:e.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[e.jsx(Qe,{userLocation:s,onLocationChange:k,onFilterToggle:_,showMobileNav:n,onMobileNavToggle:y}),e.jsx(es,{showMobileNav:n,onClose:f}),e.jsx("main",{className:"w-full",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Set Your Location"}),e.jsx(We,{onLocationDetected:h,className:"w-full"}),s&&e.jsx("button",{onClick:()=>r(!1),className:"mt-4 w-full px-4 py-2 border border-neutral-300 text-neutral-700 rounded-lg hover:bg-neutral-50 transition-colors",children:"Cancel"})]})}),l&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(G,{className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),e.jsx("div",{className:"mt-1 text-sm text-red-700",children:l}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:v,className:"text-sm font-medium text-red-800 hover:text-red-900",children:"Try again"})})]})]})}),!s&&!a&&e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl",children:e.jsx("span",{className:"text-3xl",children:"🛒💰"})}),e.jsx("h2",{className:"text-3xl font-bold text-neutral-900 mb-4",children:"Welcome to FlyerFlutter"}),e.jsx("p",{className:"text-lg text-neutral-700 mb-2 max-w-2xl mx-auto",children:"🇨🇦 Canada's Premier Grocery Coupon & Flyer Comparison App"}),e.jsx("p",{className:"text-neutral-600 mb-8 max-w-md mx-auto",children:"Compare weekly flyer deals across major Canadian grocery chains. Save money on your groceries every Wednesday when new flyers drop!"}),e.jsx("button",{onClick:k,className:"px-8 py-3 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-xl hover:from-red-600 hover:to-orange-600 transition-all duration-200 font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"🎯 Find Deals Near Me"}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white/80 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🏪"}),e.jsx("p",{className:"text-sm font-medium text-neutral-700",children:"Real Store Data"})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"text-2xl mb-2",children:"📅"}),e.jsx("p",{className:"text-sm font-medium text-neutral-700",children:"Weekly Updates"})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"text-2xl mb-2",children:"💵"}),e.jsx("p",{className:"text-sm font-medium text-neutral-700",children:"Price Comparison"})]})]})]})]}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Nearby Stores"}),x&&d.length===0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(4)].map((b,C)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-neutral-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-neutral-100 rounded w-3/4"})]},C))}):e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx("p",{className:"text-neutral-500 text-sm",children:"No stores found nearby"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.slice(0,8).map(b=>e.jsx(Ye,{store:b,compact:!0},b.id))}),d.length>8&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:["View all stores (",d.length,")"]})})]})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Ze,{deals:p,loading:x,error:null,showFilters:!0,showSearch:!0,userLocation:s})})]})]})}),e.jsx(Xe,{isOpen:c,onClose:()=>u(!1)})]})})}class ts extends Z.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("React Error Boundary caught an error:",t,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:"We encountered an unexpected error. Please refresh the page to try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium",children:"Refresh Page"}),!1]})}):this.props.children}}function as(){performance.mark("app-start"),window.addEventListener("load",()=>{performance.mark("app-loaded"),performance.measure("app-load-time","app-start","app-loaded"),performance.getEntriesByName("app-load-time")[0]})}as();const rs=Y.createRoot(document.getElementById("root"));rs.render(e.jsx(Z.StrictMode,{children:e.jsx(ts,{children:e.jsx(ss,{})})}));
